// Task 1 

let secondsRun = 0;

function updateClock() {
  const now = new Date();

  let hours = now.getHours();
  let minutes = String(now.getMinutes()).padStart(2, '0');
  let seconds = String(now.getSeconds()).padStart(2, '0');

  let ampm = hours >= 12 ? "PM" : "AM";

  hours = hours % 12 || 12;
  hours = String(hours).padStart(2, '0');

  document.getElementById("clock").innerText =
    `${hours} : ${minutes} : ${seconds} ${ampm}`;

  secondsRun++;

  if (secondsRun === 10) {
    clearInterval(clockInterval);
  }
}

const clockInterval = setInterval(updateClock, 1000);

// Task 2 

function calculateAge(year, month, day) {

  const today = new Date();

  let years = today.getFullYear() - year;
  let months = today.getMonth()+1 - month;
  let days = today.getDate() - day;

  if (days < 0) {
    months--;
    days = days + 30; 
  }

  if (months < 0) { 
    years--;
    months = months + 12;
  }

  console.log(`You are ${years} years, ${months} months and ${days} days old.`);
}

calculateAge(2003, 7, 2);


// Task 3 

console.log("Start");

setTimeout(() => {
  console.log("Middle");
}, 0);

console.log("End");


// Task 4

let number = 10;

let timer = setInterval(() => {

  console.log(number);
  number--;

  if (number < 0) {
    clearInterval(timer);
    console.log("Time Up!");
  }
}, 1000);


// Task 5 

function checkResult(marks) {
  return new Promise((resolve, reject) => {
    if (marks >= 35) {
      resolve("Pass");
    } else {
      reject("Fail");
    }
  });
}
checkResult(40)
  .then(result => console.log(result))
  .catch(error => console.log(error))
  .finally(() => console.log("Exam Result Checked"));

 //Task 6

  function step1() {
  return Promise.resolve("Step1 Completed");
}

function step2() {
  return Promise.resolve("Step2 Completed");
}

function step3() {
  return Promise.resolve("Step3 Completed");
}
step1()
  .then(res => {
    console.log(res);
    return step2();
  })
  .then(res => {
    console.log(res);
    return step3();
  })
  .then(res => {
    console.log(res);
    console.log("All Steps Done");
  });

// Task 7 

async function getProducts() {
  try {
    const response = await fetch("https://fakestoreapi.com/products");
    const products = await response.json();

    products.forEach(product => {
      console.log(product.title);
    });

    console.log("Total Products:", products.length);

    console.log("First Product Price:", products[0].price);

  } catch (error) {
    console.log("Error fetching products:", error);
  }
}

getProducts();


// task 8

async function filterExpensiveProducts() {
  try {
    const response = await fetch("https://fakestoreapi.com/products");
    
    if (!response.ok) {
      throw new Error("Failed to fetch products");
    }

    const products = await response.json();
    const expensiveProducts = products
      .filter(product => product.price > 500)
      .map(product => ({
        title: product.title,
        price: product.price
      }));

    console.log("Products Above â‚¹500:");
    console.log(expensiveProducts);

  } catch (error) {
    console.log("Error:", error.message);
  }
}

filterExpensiveProducts();

// Task 9 

async function loadProducts() {
  try {
  
    const response = await fetch("https://fakestoreapi.com/wrong-url");

    if (!response.ok) {
      throw new Error("API Error");
    }

    const data = await response.json();
    console.log(data);

  } catch (error) {
    console.log("Failed to load products. Please try again.");
  }
}

loadProducts();
